<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="imageMapper">

	<select id="getImageDetail" parameterType="Integer" resultType="image.ImageBBS">
		select w_id, title, writer, to_char(w_date, 'YYYY/MM/DD HH24:MI:SS') as w_date,
			imagename, content from imagebbs_tbl where w_id = #{id}
	</select>
	
	<select id="getTotal" resultType="Integer">
		select count(*) from imagebbs_tbl
	</select>
	
	<!-- 페이지네이션을 위한 조회 -->
	<select id="imageList" parameterType="notice.FromTo" resultType="image.ImageBBS">
		select w_id, title, writer, w_date, imagename
		from (select rownum rank, a.*
			from(select w_id, title, writer, 
				to_char(w_date, 'YYYY/MM/DD') as w_date, imagename
				from imagebbs_tbl order by w_id desc) a )
		where rank > #{start} and rank <![CDATA[<]]> #{end}
	</select>

	<insert id="putImageBBS" parameterType="image.ImageBBS">
		insert into imagebbs_tbl values(#{w_id},#{group_id},#{parent_id},#{order_no},
		#{title},#{content},#{writer},sysdate,#{imagename},#{password})
	</insert>

	<!-- 글번호 자동증가를 위한 글개수 조회쿼리 -->
	<select id="getMaxNum" resultType="Integer">
		select max(w_id) from imagebbs_tbl
	</select>

</mapper>